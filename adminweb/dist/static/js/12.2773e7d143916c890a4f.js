webpackJsonp([12],{RBQi:function(t,e){},jYmo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"tasktable",data:function(){return{tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,addVisible:!1,resetVisible:!1,form:{name:"",role:"",phone:""},idx:-1,uid:"",pagenum:0,totalnum:0,taskstatus:"all"}},filters:{formatTime:function(t,e){var a=new Date(t),l=a.getFullYear(),s=a.getMonth()+1,r=a.getDate(),i=a.getHours(),o=a.getMinutes(),n=a.getSeconds(),c="";return void 0==e&&(c=l+"-"+(s<10?"0"+s:s)+"-"+(r<10?"0"+r:r)+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(n<10?"0"+n:n)),"yyyy-mm-dd"==e&&(c=l+"-"+(s<10?"0"+s:s)+"-"+(r<10?"0"+r:r)),"yyyy-mm"==e&&(c=l+"-"+(s<10?"0"+s:s)),"mm-dd"==e&&(c=" "+(mm<10?"0"+mm:mm)+":"+(ddmin<10?"0"+dd:dd)),"hh:mm"==e&&(c=" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)),c}},created:function(){this.getData()},computed:{},methods:{formatArea:function(t,e){return 0==t.stickerArea?"后窗":1==t.stickerArea?"车门两侧":2==t.stickerArea?"全车":3==t.stickerArea?"其他":"未知"},formatStatus:function(t,e){return 0==t.status?"审核中":1==t.status?"审核通过":2==t.status?"进行中":3==t.status?"已领完":4==t.status?"已截止":-1==t.status?"已删除":"未知"},handleCurrentChange:function(t){var e=this;this.pagenum=t-1,this.otableData="",setTimeout(function(){e.getData(e.jid)},300)},getData:function(){var t=this;this.$axios.get("/ctb/task/adminGetALLTask",{params:{openId:1e4,userId:4,status:this.taskstatus}}).then(function(e){1==e.data.code?t.tableData=e.data.data:t.$message.error(e.data.msg)})},search:function(){this.is_search=!0},addtask:function(t,e){this.addVisible=!0},handledelete:function(t,e){var a=this;console.log(e.id),0==e.status||1==e.status||2==e.status?this.$confirm("确认删除此任务吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/ctb/task/adminDelTask",{params:{openId:1e4,userId:4,taskId:e.id}}).then(function(t){1==t.data.code?(a.$message.success("任务删除成功"),a.getData()):a.$message.error(t.data.msg)})}).catch(function(){}):3==e.status||4==e.status?this.$message.error("任务已开始，谨慎操作"):this.$message.error("任务已删了，还删什么")},saveAdd:function(t,e){var a=this;this.$axios.get("/ctb/task/adminCreateTask",{params:{openId:1e4,userId:4,title:this.form.title,info:this.form.info,deadline:this.form.deadline,stickerArea:this.form.stickerArea,priceMonth:this.form.priceMonth,limitNum:this.form.limitNum,adImgs:'[{"url":"'+this.form.adImgs+'"}]'}}).then(function(t){1==t.data.code?(a.addVisible=!1,a.$message.success("任务新增成功"),a.form.title="",a.form.info="",a.form.deadline="",a.form.stickerArea="",a.form.priceMonth="",a.form.limitNum="",a.form.adImgs="",a.getData()):a.$message.error(t.data.msg)})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 用户管理")])],1)],1),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"search"},on:{click:t.addtask}},[t._v("新增任务")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"id号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"任务名称",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:t.formatStatus,width:"70"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"价格",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("\n            "+t._s(e.row.priceMonth)+"元/每月\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stickerArea",label:"区域位置",formatter:t.formatArea,width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"limitNum",label:"任务总数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"collectionsNum",label:"已领数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"截止时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("\n            "+t._s(t._f("formatTime")(e.row.deadline,"yyyy-mm-dd"))+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){t.handledelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalnum},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增任务",visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"任务标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务描述"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.form.info,callback:function(e){t.$set(t.form,"info",e)},expression:"form.info"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{placeholder:"请输入价格"},model:{value:t.form.priceMonth,callback:function(e){t.$set(t.form,"priceMonth",e)},expression:"form.priceMonth"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务总数"}},[a("el-input",{attrs:{placeholder:"请输入任务数"},model:{value:t.form.limitNum,callback:function(e){t.$set(t.form,"limitNum",e)},expression:"form.limitNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片地址"}},[a("el-input",{attrs:{placeholder:"请输入图片url地址,默认尺寸800X400"},model:{value:t.form.adImgs,callback:function(e){t.$set(t.form,"adImgs",e)},expression:"form.adImgs"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"车贴区域"}},[a("el-select",{attrs:{placeholder:"请选择车贴区域"},model:{value:t.form.stickerArea,callback:function(e){t.$set(t.form,"stickerArea",e)},expression:"form.stickerArea"}},[a("el-option",{key:"0",attrs:{label:"后窗",value:"0"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"车门两侧",value:"1"}}),t._v(" "),a("el-option",{key:"2",attrs:{label:"全车",value:"2"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:"其他",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"timestamp"},model:{value:t.form.deadline,callback:function(e){t.$set(t.form,"deadline",e)},expression:"form.deadline"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{on:{click:t.saveAdd}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(t){a("RBQi")},"data-v-2ea81c47",null);e.default=r.exports}});